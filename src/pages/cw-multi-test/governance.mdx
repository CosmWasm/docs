---
tags: ["multitest", "governance"]
---

# Governance

```rust showLineNumbers copy
use cosmwasm_std::{GovMsg, VoteOption};
use cw_multi_test::{no_init, AppBuilder, Executor, IntoAddr};

// Build the application with default (always failing) governance module.
let mut app = AppBuilder::default().build(no_init);

// Prepare sender address.
let sender_addr = "sender".into_addr();

// Prepare message for vote.
let vote_msg = GovMsg::Vote {
    proposal_id: 1,
    option: VoteOption::Yes,
};

// Execute vote governance message.
let response = app.execute(sender_addr, vote_msg.into()).unwrap_err();

// Always an error is returned.
assert!(response.to_string().starts_with("Unexpected exec msg Vote"));
```

```rust showLineNumbers copy
use cosmwasm_std::{Decimal, GovMsg, Uint128, VoteOption, WeightedVoteOption};
use cw_multi_test::{no_init, AppBuilder, Executor, IntoAddr};

// Build the application with default (always failing) governance module.
let mut app = AppBuilder::default().build(no_init);

// Prepare sender address.
let sender_addr = "sender".into_addr();

// Prepare message for weighted vote.
let vote_msg = GovMsg::VoteWeighted {
    proposal_id: 1,
    options: vec![WeightedVoteOption {
        option: VoteOption::Yes,
        weight: Decimal::new(Uint128::new(12)),
    }],
};

// Execute weighted vote governance message.
let response = app.execute(sender_addr, vote_msg.into()).unwrap_err();

// Always an error is returned.
assert!(response
    .to_string()
    .starts_with("Unexpected exec msg VoteWeighted"));
```

```rust showLineNumbers copy
use cosmwasm_std::{GovMsg, VoteOption};
use cw_multi_test::{no_init, AppBuilder, Executor, GovFailingModule, IntoAddr};

// Build the application with always failing governance module.
let mut app = AppBuilder::default()
    .with_gov(GovFailingModule::new())
    .build(no_init);

// Prepare sender address.
let sender_addr = "sender".into_addr();

// Prepare message for vote.
let vote_msg = GovMsg::Vote {
    proposal_id: 1,
    option: VoteOption::Yes,
};

// Execute vote governance message.
let response = app.execute(sender_addr, vote_msg.into()).unwrap_err();

// Always an error is returned.
assert!(response.to_string().starts_with("Unexpected exec msg Vote"));
```

```rust showLineNumbers copy
use cosmwasm_std::{Decimal, GovMsg, Uint128, VoteOption, WeightedVoteOption};
use cw_multi_test::{no_init, AppBuilder, Executor, GovFailingModule, IntoAddr};

// Build the application with always failing governance module.
let mut app = AppBuilder::default()
    .with_gov(GovFailingModule::new())
    .build(no_init);

// Prepare sender address.
let sender_addr = "sender".into_addr();

// Prepare message for weighted vote.
let vote_msg = GovMsg::VoteWeighted {
    proposal_id: 1,
    options: vec![WeightedVoteOption {
        option: VoteOption::Yes,
        weight: Decimal::new(Uint128::new(12)),
    }],
};

// Execute weighted vote governance message.
let response = app.execute(sender_addr, vote_msg.into()).unwrap_err();

// Always an error is returned.
assert!(response
    .to_string()
    .starts_with("Unexpected exec msg VoteWeighted"));
```

```rust showLineNumbers copy
use cosmwasm_std::{GovMsg, VoteOption};
use cw_multi_test::{no_init, AppBuilder, Executor, GovAcceptingModule, IntoAddr};

// Build the application with always failing governance module.
let mut app = AppBuilder::default()
    .with_gov(GovAcceptingModule::new())
    .build(no_init);

// Prepare sender address.
let sender_addr = "sender".into_addr();

// Prepare message for vote.
let vote_msg = GovMsg::Vote {
    proposal_id: 1,
    option: VoteOption::Yes,
};

// Execute vote governance message.
let response = app.execute(sender_addr, vote_msg.into()).unwrap();

// Always empty data is returned.
assert_eq!(None, response.data);
```

```rust showLineNumbers copy
use cosmwasm_std::{Decimal, GovMsg, Uint128, VoteOption, WeightedVoteOption};
use cw_multi_test::{no_init, AppBuilder, Executor, GovAcceptingModule, IntoAddr};

// Build the application with always failing governance module.
let mut app = AppBuilder::default()
    .with_gov(GovAcceptingModule::new())
    .build(no_init);

// Prepare sender address.
let sender_addr = "sender".into_addr();

// Prepare message for weighted vote.
let vote_msg = GovMsg::VoteWeighted {
    proposal_id: 1,
    options: vec![WeightedVoteOption {
        option: VoteOption::Yes,
        weight: Decimal::new(Uint128::new(12)),
    }],
};

// Execute weighted vote governance message.
let response = app.execute(sender_addr, vote_msg.into()).unwrap();

// Always empty data is returned.
assert_eq!(None, response.data);
```
