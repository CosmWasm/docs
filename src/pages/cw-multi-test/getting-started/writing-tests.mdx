---
tags: ["multitest", "getting started", "writing tests"]
---

# Writing tests

## Compiling the smart contract

With the example **counter** smart contract set up, you can now compile (build) the project:

```shell copy
cargo build
```

```ansi
Â [32;1mUpdating[0mÂ crates.ioÂ index
Â Â [32;1mLocking[0mÂ 112Â packagesÂ toÂ latestÂ compatibleÂ versions
Â Â Â Â â‹®
[32;1mCompiling[0mÂ cosmwasm-cryptoÂ v2.1.3
[32;1mCompiling[0mÂ cosmwasm-stdÂ v2.1.3
[32;1mCompiling[0mÂ cw-storage-plusÂ v2.0.0
[32;1mCompiling[0mÂ counterÂ v0.1.0Â (/home/user/my-contracts/counter)
Â [32;1mFinished[0mÂ `dev`Â profileÂ [unoptimizedÂ +Â debuginfo]Â target(s)Â inÂ 3.27s
```

Ok, the **counter** smart contract has been built successfully.

## Preparing directories for tests

```ansi {8-12} filename="counter"
[34;1m.[0m
â”œâ”€â”€Â Cargo.toml
â”œâ”€â”€Â [34;1msrc[0m
â”‚Â Â Â â”œâ”€â”€ contract.rs
â”‚Â Â Â â”œâ”€â”€ lib.rs
â”‚Â Â Â â””â”€â”€ msg.rs
â”œâ”€â”€Â taskfile.yml
â””â”€â”€Â [34;1mtests[0m
Â Â Â Â â”œâ”€â”€Â mod.rs
Â Â Â Â â””â”€â”€Â [34;1mmultitest[0m
Â Â Â Â Â Â Â Â â”œâ”€â”€Â mod.rs
Â Â Â Â Â Â Â Â â””â”€â”€Â test_counter.rs
```

## Preparing code coverage script

```shell
touch coverage.sh
```

```shell copy filename="coverage.sh"
#!/usr/bin/env bash

# generate coverage report
cargo tarpaulin --force-clean --out Html --engine llvm --output-dir "$(pwd)/target/coverage-report"

# display link to coverage report
echo "Report: file://$(pwd)/target/coverage-report/tarpaulin-report.html"
```

```shell
chmod +x coverage.sh
```

```shell
tree
```

```ansi {3} filename="counter"
[34;1m.[0m
â”œâ”€â”€Â Cargo.toml
â”œâ”€â”€Â [32;1mcoverage.sh[0m
â”œâ”€â”€Â [34;1msrc[0m
â”‚Â Â Â â”œâ”€â”€ contract.rs
â”‚Â Â Â â”œâ”€â”€ lib.rs
â”‚Â Â Â â””â”€â”€ msg.rs
â”œâ”€â”€Â taskfile.yml
â””â”€â”€Â [34;1mtests[0m
Â Â Â Â â”œâ”€â”€Â mod.rs
Â Â Â Â â””â”€â”€Â [34;1mmultitest[0m
Â Â Â Â Â Â Â Â â”œâ”€â”€Â mod.rs
Â Â Â Â Â Â Â Â â””â”€â”€Â test_counter.rs
```

## Running tests and measuring code coverage

```shell copy
cargo test
```

```ansi
     Running unittests src/lib.rs (target/debug/deps/counter-f350df45a1cd1c74)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/mod.rs (target/debug/deps/mod-54761c1d31e6d0fe)

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

   Doc-tests counter

running 0 tests

test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s
```

```shell copy
cargo nextest run
```

```ansi
    Starting 0 tests across 2 binaries (run ID: dbbc2d93-b077-47ea-81f2-9cdfea6fff1b, nextest profile: default)
------------
     Summary [   0.000s] 0 tests run: 0 passed, 0 skipped
```

```shell copy
./coverage.sh
```

```ansi
|| Tested/Total Lines:
|| src/contract.rs: 0/18
||
0.00% coverage, 0/18 lines covered
```
